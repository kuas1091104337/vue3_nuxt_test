import{N as m,A as u,r as v}from"./C4-ekBSf.js";const p=$fetch.create({baseURL:"https://api.github.com"}),h=t=>p(`/users/${t}`),g=(t,r,a)=>p(`/users/${t}/repos?page=${r}&per_page=${a}&sort=pushed`),U=""+new URL("notFound.CEzYeOk8.jpg",import.meta.url).href,A=m("indexStore",()=>{const t=u([]),r=u(!1),a=u(!1),e=v({userName:"",avatarUrl:"",updatedAt:"",publicRepos:0,page:1,limit:9}),c=()=>{e.userName="",e.page=0,e.avatarUrl="",e.updatedAt="",t.value=[]},n=()=>e.page++;return{state:e,fetchUserData:async s=>{try{const o=await h(s),{login:i,avatar_url:l,public_repos:d,updated_at:f}=o;e.userName=i,e.avatarUrl=l,e.updatedAt=f,e.publicRepos=d}catch(o){o.response.status===404&&(e.avatarUrl=U,e.userName="This user is not found!!!")}},fetchRepos:async()=>{if(r.value||a.value)return;a.value=!0,n();const s=await g(e.userName,e.page,e.limit);t.value=[...t.value,...s],a.value=!1,r.value=s.length<e.limit},addPage:n,setUserName:s=>e.userName=s,resetData:c,repoList:t,isReposOver:r,isLoadRepos:a}});export{A as u};
