import{e as C,l as P,A as h,y as U,c as n,a as r,n as c,H as _,k as l,F as V,O as $,t as d,o as i,E as q}from"./C4-ekBSf.js";import{u as B}from"./BBBKgNSr.js";import"./wSbNHcIL.js";import"./BnZt97jL.js";const z={class:"bg-[#6cb7da] p-5"},D={class:"flex justify-center"},F={class:"pt-[38px]"},R={class:"text-center leading-[42px] min-w-[100px] px-2"},T={key:0,class:"text-white text-[26px] font-bold"},A=["onUpdate:modelValue"],L={class:"text-[14px]"},O=["onClick"],j=["onClick"],I=C({__name:"mongodb",async setup(N){let p,x;const{data:v,refresh:b,error:f}=([p,x]=P(()=>B("/api/people",{onRequest({request:o,options:t}){t.headers=t.headers||{},t.headers.authorization="Bearer token 1234567890",console.log(t.headers)},onRequestError({request:o,options:t,error:e}){console.error(o,t,e)},onResponse({request:o,response:t,options:e}){return t._data},onResponseError({request:o,response:t,options:e}){console.error(o,t,e)}},"$r2BOl63qNF")),p=await p,x(),p),a=h({name:"",email:"",age:""}),s=U(()=>v.value.map(o=>({...o,isEdit:h(!1)}))),w=()=>{a.value.name="",a.value.email="",a.value.age=""},g=async o=>{await $fetch("/api/people/update",{method:"PUT",body:{...o}}),await b()},y=(o,t)=>{if(s.value[o].isEdit.value=!s.value[o].isEdit.value,!s.value[o].isEdit.value){const{_id:e,name:u}=t;g({_id:e,name:u})}},E=async()=>{await $fetch("/api/people/create",{method:"POST",body:{name:a.value.name,email:a.value.email,age:a.value.age}}),await b(),alert("新增成功"),w()},k=async o=>{await $fetch("/api/people/remove",{method:"DELETE",body:{_id:o}}),await b()};return(o,t)=>(i(),n("div",z,[r("div",D,[c(r("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l(a).name=e),class:"text-center bg-white h-[30px] border border-2 rounded-full",type:"text",placeholder:"名字"},null,512),[[_,l(a).name]]),c(r("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l(a).email=e),class:"text-center bg-white h-[30px] border border-2 rounded-full mx-2",type:"text",placeholder:"信箱"},null,512),[[_,l(a).email]]),c(r("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l(a).age=e),class:"text-center bg-white h-[30px] border border-2 rounded-full",type:"text",placeholder:"年齡"},null,512),[[_,l(a).age]])]),r("button",{onClick:E,class:"text-white cursor-pointer w-[150px] h-[30px] block bg-[#d77186] border-2 border-[#d75725] rounded-full [box-shadow:0_2px_0_#b4314b] m-[10px_auto_2px] [transition:border-color_.3s,box-shadow_.3s,margin_.3s] active:border-[#982b00] active:[box-shadow:0_0_0_#b4314b] active:m-[12px_auto_0]"}," 新增 "),r("div",F,[(i(!0),n(V,null,$(l(s),(e,u)=>(i(),n("div",{class:q(["flex justify-center",{"mt-[20px]":u>0}]),key:e._id},[r("div",R,[e.isEdit.value?c((i(),n("input",{key:1,"onUpdate:modelValue":m=>e.name=m,class:"text-center w-[100px] h-[30px] bg-white border border-2 rounded-full",type:"text",placeholder:"名字"},null,8,A)),[[_,e.name]]):(i(),n("p",T,d(e.name)+","+d(e.isEdit.value),1))]),r("div",L,[r("button",{onClick:m=>y(u,e),class:"cursor-pointer size-[42px] bg-white border-2 rounded-full mr-2"},d(e.isEdit.value?"save":"edit"),9,O),r("button",{onClick:m=>k(e._id),class:"cursor-pointer size-[42px] bg-white border-2 rounded-full"}," 刪除 ",8,j)])],2))),128))]),r("pre",null,d(l(f)),1),r("pre",null,d(l(s)),1)]))}});export{I as default};
